{
    "sourceFile": "src/App.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1680030411975,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1680030411975,
            "name": "Commit-0",
            "content": "/*\n *   Copyright (c) 2023 WSO2 Inc. (http://www.wso2.org)\n *   All rights reserved.\n *   \n *   This software is the property of WSO2 Inc. and its suppliers, if any.\n *   Dissemination of any information or reproduction of any material contained\n *   herein in any form is strictly forbidden, unless permitted by WSO2 expressly.\n *   You may not alter or remove any copyright or other notice from copies of this content.\n */\n// import logo from './logo.svg';\nimport React, { useEffect,useState } from 'react';\nimport './App.css';\nimport './App.scss';\nimport { Nav, Navbar, Container }  from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faUser } from '@fortawesome/free-solid-svg-icons';\nimport { BrowserRouter, Switch, Route, Link } from 'react-router-dom';\nimport { useAuthContext } from \"@asgardeo/auth-react\";\n\nimport Catalog from './components/Catalog/Catalog.js';\nimport MyCart from './components/MyCart/Cart.js';\nimport Admin from './components/Admin/Admin.js';\n\n// Component to render the login/logout menu\n\nconst RightLoginSignupMenu = () => {\n  const { state, signIn, signOut, userInfo , groups,getBasicUserInfo } = useAuthContext();\n  // Based on Asgardeo SDK, set a variable like below to check and conditionally render the menu\n  let isLoggedIn = false;\n\n  // Host the menu content and return it at the end of the function\n  let menu;\n\n  // Conditionally render the following two links based on whether the user is logged in or not\n  if (state.isAuthenticated) {\n    menu =  <>\n      <Nav>\n      <button onClick={() => signOut()}>Logout</button>\n      <Nav.Link href=\"#deets\"><FontAwesomeIcon icon={faUser} /></Nav.Link>\n      </Nav>\n    </>\n  } else {\n    menu = <>\n      <Nav>\n      <button className=\"reg\" onClick={() => signIn()}>Login</button>\n      </Nav>\n    </>\n  }\n  return menu;\n}\n\n\n\n// Component to render the navigation bar Admin\nconst PetStoreNavAdmin = () => {\n  return (\n    <>\n    <Navbar bg=\"light\" expand=\"lg\">\n      <Container>\n        <Navbar.Brand href=\"#home\">Kphone</Navbar.Brand>\n        <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n        <Navbar.Collapse id=\"basic-navbar-nav\">\n          <Nav className=\"me-auto\">\n            <Link to=\"/\" className=\"nav-link\">Catalog</Link>\n\n            <Link to=\"/admin\" className=\"nav-link\">Admin</Link>\n          </Nav>\n        </Navbar.Collapse>\n        <RightLoginSignupMenu />\n      </Container>\n    </Navbar>\n    </>\n  );\n};\n\n// Component to render the navigation bar customer\nconst PetStoreNavCus = () => {\n  return (\n    <>\n    <Navbar bg=\"light\" expand=\"lg\">\n      <Container>\n        <Navbar.Brand href=\"#home\">Kphone</Navbar.Brand>\n        <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n        <Navbar.Collapse id=\"basic-navbar-nav\">\n          <Nav className=\"me-auto\">\n            <Link to=\"/\" className=\"nav-link\">Catalog</Link>\n\n            <Link to=\"/mycart\" className=\"nav-link\">My Cart</Link>\n          </Nav>\n        </Navbar.Collapse>\n        <RightLoginSignupMenu />\n      </Container>\n    </Navbar>\n    </>\n  );\n};\n\n// Component to render the navigation bar customer\nconst PetStoreMain = () => {\n  return (\n    <>\n    <Navbar bg=\"light\" expand=\"lg\">\n      <Container>\n        <Navbar.Brand href=\"#home\">Kphone</Navbar.Brand>\n        <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n        <Navbar.Collapse id=\"basic-navbar-nav\">\n          <Nav className=\"me-auto\">\n            {/* <Link to=\"/\" className=\"nav-link\">Catalog</Link> */}\n\n            {/* <Link to=\"/mycart\" className=\"nav-link\">My Cart</Link> */}\n          </Nav>\n        </Navbar.Collapse>\n        <RightLoginSignupMenu />\n      </Container>\n    </Navbar>\n    </>\n  );\n};\n\n// Main app component\nconst App = () => {\n// useEffect(() => {\n  //   document.title = 'PetStore';\n  // }, []);  \n  return (\n    <>\n      <BrowserRouter>\n      <PetStoreNavAdmin/>\n      <Switch>\n        <Route exact path=\"/\">\n          <Catalog />\n        </Route>\n        <Route path=\"/admin\">\n          <Admin />\n        </Route>\n      </Switch>\n    </BrowserRouter>\n    </>\n  );\n}\n\n// Main app component\nconst AppCustomer = () => {\n  // useEffect(() => {\n  //   document.title = 'PetStore';\n  // }, []);\n  return (\n    <>\n      <BrowserRouter>\n      <PetStoreNavCus />\n      <Switch>\n        <Route exact path=\"/\">\n          <Catalog />\n        </Route>\n        <Route path=\"/mycart\">\n          <MyCart />\n        </Route>\n      </Switch>\n    </BrowserRouter>\n    </>\n  );\n}\n\n// Main Catalog component\nconst AppNav = () => {\n  // useEffect(() => {\n  //   document.title = 'PetStore';\n  // }, []);\n  return (\n    <>\n      <BrowserRouter>\n      <PetStoreMain />\n      <Switch>\n        {/* <Route exact path=\"/\"> */}\n          <Catalog />\n        {/* </Route> */}\n        {/* <Route path=\"/mycart\">\n          <MyCart />\n        </Route> */}\n      </Switch>\n    </BrowserRouter>\n    </>\n  );\n}\n\nfunction Application() {\n\n  const { state, signIn, signOut, userInfo , groups,getBasicUserInfo } = useAuthContext();\n  const [basicUserDetails, setBasicUserDetails] = useState(null);\n  \n\n  \n  getBasicUserInfo().then((basicUserDetails) => {\n      console.log(basicUserDetails);\n  }).catch((error) => {\n      // Handle the error\n  })\n  \n  useEffect(() => {\n    getBasicUserInfo().then((basicUserDetails) => {\n      console.log(basicUserDetails);\n      console.log(basicUserDetails?.groups);\n     setBasicUserDetails(basicUserDetails)\n  }).catch((error) => {\n      // Handle the error\n  })\n  }, []);  \n  return (\n    <div className=\"App\">\n      {\n        state.isAuthenticated && basicUserDetails?.groups?.includes(\"admin_group\") \n          ? (\n            <div>\n              {/* <button onClick={() => signOut()}>Logout</button> */}\n              <App/>\n            </div>\n          ):\n          state.isAuthenticated ?\n          (\n            <div>\n              <ul>\n                <li>{JSON.stringify(state)}</li>\n              </ul>\n\n              {/* <button onClick={() => signOut()}>Logout</button> */}\n              <AppCustomer/>\n            </div>\n          ):<AppNav/>\n\n      }\n    </div>\n  );\n}\n\n\nexport default Application;\n\n\n\n"
        }
    ]
}